<mat-toolbar>
  <span>Weight Tracker</span>
  <span style="flex: 1"></span>
  <button matIconButton (click)="activePage.set('table')" [class.active]="activePage() === 'table'">
    <mat-icon>monitor_weight</mat-icon>
  </button>
  <button matIconButton (click)="activePage.set('chart')" [class.active]="activePage() === 'chart'">
    <mat-icon>show_chart</mat-icon>
  </button>
</mat-toolbar>

@switch(activePage()) {
@case('chart') {
<div class="chart-container">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <div class="goal-input final">
      <label>Meta Final:</label>
      <input inputmode="decimal" [ngModel]="finalGoal()" (ngModelChange)="finalGoal.set($event)" placeholder="kg" />
    </div>

    @if (predictionInfo()) {
    <div class="prediction-card">
      <span class="label">Previsão:</span>
      <span class="date">{{ predictionInfo() }}</span>
    </div>
    }
  </div>
  <br />
  <div style="display: flex; justify-content: space-between;">
    <h2>Evolução</h2>
    <div class="controls">
      <button [class.active]="viewMode() === 'all'" (click)="viewMode.set('all')">All</button>
      <button [class.active]="viewMode() === 'week'" (click)="viewMode.set('week')">Week</button>
      <button [class.active]="viewMode() === 'month'" (click)="viewMode.set('month')">Month</button>
    </div>
  </div>

  <div echarts [options]="chartOptions()" class="chart-box"></div>
</div>
}
@default {
<table mat-table [dataSource]="sortedEntries()" class="mat-elevation-z8 demo-table">
  <!-- Position Column -->
  <ng-container matColumnDef="date">
    <th mat-header-cell *matHeaderCellDef>Date</th>
    <td mat-cell *matCellDef="let element">{{element.date | date:'MMM d, y (EEE)'}}</td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="weight">
    <th mat-header-cell *matHeaderCellDef>Weight</th>
    <td mat-cell *matCellDef="let element">{{element.weight}}</td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="symbol">
    <th mat-header-cell *matHeaderCellDef>Symbol</th>
    <td mat-cell *matCellDef="let element">{{element.symbol}}</td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns; let i = index;" (click)="openDialog(i)"></tr>
</table>

<button matFab style="position: absolute; bottom: 20px; right: 20px;" (click)="openDialog()">
  <mat-icon>monitor_weight_gain</mat-icon>
</button>
}
}